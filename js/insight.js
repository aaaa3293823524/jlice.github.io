(function(g,r){var m=g(".ins-search");var c=m.find(".ins-search-input");var p=m.find(".ins-section-wrapper");var o=m.find(".ins-section-container");m.parent().remove(".ins-search");g("body").append(m);function h(u){return g("<section>").addClass("ins-section").append(g("<header>").addClass("ins-section-header").text(u))}function b(w,y,u,x,v){return g("<div>").addClass("ins-selectable").addClass("ins-search-item").append(g("<header>").append(g("<i>").addClass("fa").addClass("fa-"+w)).append(y!=null&&y!=""?y:r.TRANSLATION["UNTITLED"]).append(u?g("<span>").addClass("ins-slug").text(u):null)).append(x?g("<p>").addClass("ins-search-preview").text(x):null).attr("data-url",v)}function s(v,x){var u;var w;if(x.length===0){return null}u=r.TRANSLATION[v];switch(v){case"POSTS":case"PAGES":w=x.map(function(y){return b("file",y.title,null,y.text.slice(0,150),r.ROOT_URL+y.path)});break;case"CATEGORIES":case"TAGS":w=x.map(function(y){return b(v==="CATEGORIES"?"folder":"tag",y.name,y.slug,null,y.permalink)});break;default:return null}return h(u).append(w)}function n(y,x){var w={};var v=y.pages.concat(y.posts);v.forEach(function(z){if(z[x]){z[x].forEach(function(A){w[A.name]=A})}});var u=[];for(var x in w){u.push(w[x])}return u}function t(u){return u.split(" ").filter(function(v){return !!v}).map(function(v){return v.toUpperCase()})}function k(y,z,v){var u=false;var w=t(y);var x=w.filter(function(A){var B=v.filter(function(C){if(!z.hasOwnProperty(C)){return false}if(z[C].toUpperCase().indexOf(A)>-1){return true}});if(B.length>0){return true}return false});return x.length===w.length}function f(u){return{POST:function(v){return k(u,v,["title","text"])},PAGE:function(v){return k(u,v,["title","text"])},CATEGORY:function(v){return k(u,v,["name","slug"])},TAG:function(v){return k(u,v,["name","slug"])}}}function l(v,y,u,w){var x=0;t(v).forEach(function(z){var A=new RegExp(z,"img");u.forEach(function(D,B){if(y.hasOwnProperty(D)){var C=y[D].match(A);x+=C?C.length*w[B]:0}})});return x}function d(u){return{POST:function(v){return l(u,v,["title","text"],[3,1])},PAGE:function(v){return l(u,v,["title","text"],[3,1])},CATEGORY:function(v){return l(u,v,["name","slug"],[1,1])},TAG:function(v){return l(u,v,["name","slug"],[1,1])}}}function j(A,z){var v=d(z);var w=f(z);var B=A.posts;var u=A.pages;var y=n(A,"tags");var x=n(A,"categories");return{posts:B.filter(w.POST).sort(function(D,C){return v.POST(C)-v.POST(D)}).slice(0,5),pages:u.filter(w.PAGE).sort(function(D,C){return v.PAGE(C)-v.PAGE(D)}).slice(0,5),categories:x.filter(w.CATEGORY).sort(function(D,C){return v.CATEGORY(C)-v.CATEGORY(D)}).slice(0,5),tags:y.filter(w.TAG).sort(function(D,C){return v.TAG(C)-v.TAG(D)}).slice(0,5)}}function q(u){o.empty();for(var v in u){o.append(s(v.toUpperCase(),u[v]))}}function e(v){if(v.length===0){return}var x=p[0].clientHeight;var w=v.position().top-p.scrollTop();var u=v[0].clientHeight+v.position().top;if(u>x+p.scrollTop()){p.scrollTop(u-p[0].clientHeight)}if(w<0){p.scrollTop(v.position().top)}}function i(v){var x=g.makeArray(o.find(".ins-selectable"));var w=-1;x.forEach(function(z,y){if(g(z).hasClass("active")){w=y;return}});var u=(x.length+w+v)%x.length;g(x[w]).removeClass("active");g(x[u]).addClass("active");e(g(x[u]))}function a(u){if(u&&u.length){location.href=u.attr("data-url")}}g.getJSON(r.CONTENT_URL,function(u){if(location.hash.trim()==="#ins-search"){m.addClass("show")}c.on("input",function(){var v=g(this).val();q(j(u,v))});c.trigger("input")});g(document).on("click focus",".search-form-submit",function(u){u.preventDefault();m.addClass("show");m.find(".ins-search-input").focus()}).on("click",".ins-search-item",function(){a(g(this))}).on("click",".ins-close",function(){m.removeClass("show")}).on("keydown",function(u){if(!m.hasClass("show")){return}switch(u.keyCode){case 27:m.removeClass("show");break;case 38:i(-1);break;case 40:i(1);break;case 13:a(o.find(".ins-selectable.active").eq(0));break}})})(jQuery,window.INSIGHT_CONFIG);